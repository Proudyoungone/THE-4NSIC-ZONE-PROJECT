<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link type="text/css" rel="stylesheet" href="arf.css"/>
  <script type="text/javascript" src="d3.v3.min.js"></script>
  <title>Chip ID Framework</title>

  <style>
    body {
      background: #8b8a8a;
      font-family: Arial, sans-serif;
      color: #fff;
      margin: 0;
      padding: 0;
    }

    /* ===================== */
    /* ‚úÖ LAYOUT + SIDEBAR */
    /* ===================== */

    .layout {
      display: flex;
      min-height: 100vh;
      width: 100%;
    }

    .sidebar {
      flex: 0 0 240px;
      width: 240px;
      background: #020617;
      padding: 18px 14px;
      border-right: 1px solid rgba(148,163,184,.3);
      box-shadow: 4px 0 18px rgba(0,0,0,.6);
      position: sticky;
      top: 0;
      height: 100vh;
      overflow-y: auto;
    }

    .site-logo {
      font-size: 1.05rem;
      font-weight: bold;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: #f5f5f5;
      text-shadow: 0 0 8px #00e5ff;
      margin-bottom: 18px;
    }

    .nav-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .nav-link {
      color: #e5e7eb;
      text-decoration: none;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(31,41,55,.9);
      background: #020617;
      font-size: .85rem;
      transition: .2s;
    }

    .nav-link:hover {
      border-color: #00e5ff;
      box-shadow: 0 0 12px rgba(0,229,255,.4);
      transform: translateY(-1px);
    }

    .main {
      flex: 1;
      min-width: 0;
    }

    #body {
      padding: 40px;
      width: 100%;
      box-sizing: border-box;
    }

    @media (max-width: 900px) {
      .layout {
        flex-direction: column;
      }
      .sidebar {
        width: 100%;
        height: auto;
        position: relative;
      }
    }

    /* ======================= */
    /* ‚úÖ YOUR ORIGINAL STYLES */
    /* ======================= */

    .sticky-neon {
      position: relative;
      display: inline-block;
      padding: 16px 18px;
      background: #e3e362;
      border-radius: 8px;
      max-width: 260px;
      transform: rotate(-3deg);
      border: 1px solid #00e5ff;
      box-shadow:
        0 0 10px rgba(0, 229, 255, 0.7),
        0 0 20px rgba(0, 229, 255, 0.5),
        0 10px 20px rgba(0,0,0,0.4);
      color: #1b363b;
    }

    .sticky-neon h4 {
      margin: 0 0 6px 0;
      font-size: 1.1rem;
      font-weight: bold;
      color: #1b363b;
      text-shadow: 0 0 6px #00e5ff;
    }

    .sticky-neon p {
      margin: 0;
      font-size: 0.9rem;
      line-height: 1.35em;
    }

    .sticky-neon .tape {
      position: absolute;
      top: -12px;
      left: 18px;
      width: 70px;
      height: 22px;
      background: rgba(0, 229, 255, 0.3);
      border-radius: 3px;
      transform: rotate(-8deg);
      box-shadow:
        0 0 8px rgba(0, 229, 255, 0.7),
        inset 0 0 4px rgba(255,255,255,0.5);
      backdrop-filter: blur(2px);
    }

    #searchInput {
      margin-top: 20px;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #00e5ff;
      background: #0d1b3d;
      color: #b3f4ff;
      box-shadow: 0 0 10px rgba(0, 229, 255, 0.4);
      outline: none;
      width: 280px;
    }

    #json-search-results {
      margin-top: 20px;
      font-size: .9rem;
      color:#66d9ff;
    }

    .path-label {
      font-weight: bold;
      color: #ffee58;
    }
  </style>
</head>

<body>

<div class="layout">

  <!-- ‚úÖ LEFT SIDEBAR -->
  <aside class="sidebar">
    <div class="site-logo">4NSIC ZONE</div>
    <nav class="nav-list">
      <a class="nav-link" href="index.html">Home</a>
      <a class="nav-link" href="index2.html">Chip ID Framework</a>
      <a class="nav-link" href="index3.html">Resources</a>
      <a class="nav-link" href="tools.html">Tools</a>
      <a class="nav-link" href="cmd.html">CMD Playbook</a>
    </nav>
  </aside>

  <!-- ‚úÖ MAIN CONTENT -->
  <main class="main">
    <div id="body">

      <div id="header">
        Chip ID Framework
        <hr/>
        <h2>01000010 01100001 01110100 01101101 01100001 01101110</h2>
      </div>


       <!-- Sticky Notes -->
    <div style="margin-top:20px;">
      <div class="sticky-neon">
        <div class="tape"></div>
        <h4>NOTES</h4>
        <p>Total resource links = 258! üéâ</p>
      </div>
    </div>

    <!-- üîç JSON Search Input (left-fixed) -->
    <input
      type="text"
      id="searchInput"
      placeholder="Search..."
      onkeyup="searchJson()"
    >

    <!-- JSON search results (inline on page) -->
    <div id="json-search-results">
      <div class="json-search-heading">Search Results</div>
      <p>Type a keyword in the search box on the left to search all names and URLs.</p>
    </div>

     <!-- Legend Box -->
    <div class="legend">
      <p><br>
        Legend:<br>
        (NC)- Notch Corner<br>
        (S) - Size<br>
        (PT) - Package Type<br>
        (PC) - Pin Count<br>
        (MA) - Make<br>
        (MO) - Model<br>
      </p>
    </div>

    <!-- Corner Image -->
   <img src="/Chip-ID-Framework/Gemini_Generated_Image_ghbxh3ghbxh3ghbx.png" alt=""
         class="corner-image" 
         alt="corner image"
         style="border-radius: 10px;">

    <!-- D3 Tree Script -->
    <script src="arf.js"></script>

    <!-- Footer (Now inside body and valid) -->
    <footer id="page-footer">

      <h3 class="h3-ombre">Notes</h3>
      <p>We love comic book references and inside jokes here. Chip ID Framework was built to assist anyone that is faced with the difficult task of identifying a flash memory chip that does not have much to go on. No make or model identifiers anywhere to be found? This is the place for you. Filter down to find possible matches to what you are looking for and click on the model to be taken to either the manufacturer website or a website with the corresponding datasheet.</p>

      <p>This project was built by Katelyn Rogers, a Digital Forensics and Incident Response (DFIR) professional. If you would like to connect with me, please find me on LinkedIn:<br>
      <a href="https://www.linkedin.com/in/katelyn-rogers-DFIRISTHEWORD/" target="_blank">Katelyn Rogers</a></p>

      <p>I also want to give a huge shoutout to Justin Nordine, who developed OSINT Framework, for letting me use his structure and providing me with some guidance. Visit: <a href="https://osintframework.com/" target="_blank">OSINT Framework</a><br>
      Justin‚Äôs LinkedIn: <a href="https://www.linkedin.com/in/justin-nordine-123456789/" target="_blank">Justin Nordine</a></p>

      <p>This project is open source and available on GitHub at the following link: <a href="https://github.com/Proudyoungone/Chip-ID-Framework" target="_blank">GitHub Repository</a></p>

      <h3 class="h3-ombre">Suggestions, Comments, Feedback</h3>
      <p>I would love to hear from you on any suggestions for improvement or any additional elements that are wanted. Please message me on LinkedIn. Thanks!</p>

    </footer>
    
  </main>

</div>

<!-- ‚úÖ ‚úÖ ‚úÖ FULLY FIXED JSON SEARCH -->
<script>
let chipData = null;

/* ‚úÖ FORCE LOAD ONE FILE */
window.addEventListener('DOMContentLoaded', () => {
  fetch('arf.json?v=' + Date.now())
    .then(res => {
      if (!res.ok) throw new Error("Failed to load arf.json");
      return res.json();
    })
    .then(data => {
      chipData = data;
      console.log("‚úÖ CHIP JSON LOADED");
    })
    .catch(err => {
      console.error("‚ùå JSON LOAD ERROR:", err);
      document.getElementById('json-search-results').innerHTML =
        "<p style='color:red;'>Error loading arf.json</p>";
    });
});

/* ‚úÖ SAFE RECURSIVE SEARCH */
function searchNodes(node, term, path, results) {
  if (!node) return;

  const currentName = node.name || '';
  const currentPath = path ? path + ' > ' + currentName : currentName;

  const haystack = (
    (node.name || '') + ' ' +
    (node.url || '') + ' ' +
    (node.note || '')
  ).toLowerCase();

  if (haystack.includes(term)) {
    results.push({
      path: currentPath,
      url: node.url || null
    });
  }

  if (Array.isArray(node.children)) {
    node.children.forEach(child =>
      searchNodes(child, term, currentPath, results)
    );
  }
}

/* ‚úÖ MAIN SEARCH */
function searchJson() {
  const input = document.getElementById('searchInput');
  const resultsContainer = document.getElementById('json-search-results');
  const term = input.value.trim().toLowerCase();

  if (!chipData) {
    resultsContainer.innerHTML = "<p>JSON not loaded yet...</p>";
    return;
  }

  if (!term) {
    resultsContainer.innerHTML = `
      <div class="json-search-heading">Chip Search</div>
      <p>Type a keyword above to search all names and URLs.</p>
    `;
    return;
  }

  const results = [];

  if (Array.isArray(chipData)) {
    chipData.forEach(root => searchNodes(root, term, '', results));
  } else {
    searchNodes(chipData, term, '', results);
  }

  if (results.length === 0) {
    resultsContainer.innerHTML = `
      <div class="json-search-heading">Chip Search</div>
      <p>No matches found for "<strong>${term}</strong>".</p>
    `;
    return;
  }

  resultsContainer.innerHTML = results.map(r =>
    `<div style="margin-bottom:8px;">
      <span class="path-label">${r.path}</span>
      ${r.url ? `<br><a href="${r.url}" target="_blank">${r.url}</a>` : ''}
    </div>`
  ).join('');
}
</script>

</body>
</html>
